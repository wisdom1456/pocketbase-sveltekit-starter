import{s as se,C as B,J,o as le,a as j,e as O,c as C,i as L,d as p,f as g,l as re,g as v,h as I,u as Y,m as oe,j as u,v as h,n as ne,E,L as H}from"../chunks/scheduler.c76fa77e.js";import{h as R,u as ie}from"../chunks/LoginForm.089523d1.js";import{e as z,u as ce,c as K,o as ue}from"../chunks/index.6d88ee30.js";import{S as fe,i as me,b as Z,d as ee,m as te,a as T,t as F,e as ae,g as pe,c as de}from"../chunks/index.315486b9.js";import{m as G}from"../chunks/metadataStore.28e9e3ce.js";import"../chunks/Alerts.9a8447ee.js";import{S as _e}from"../chunks/SvelteMarkdown.ec2fd99c.js";import{w as he}from"../chunks/index.b36f6ad1.js";import{f as ge}from"../chunks/postService.00e08d84.js";import"../chunks/singletons.a0b02ded.js";import{L as ve}from"../chunks/LoginGuard.44709ec0.js";function be(){const{subscribe:i,set:e,update:s}=he({posts:[],page:1,perPage:20,totalPages:1});return{subscribe:i,set:e,update:s,appendPosts:(t,a)=>s(n=>({...n,posts:[...n.posts,...t],totalPages:a})),reset:()=>e({posts:[],page:1,perPage:20,totalPages:1})}}const ke=be();function Q(i,e,s){const t=i.slice();return t[5]=e[s],t}function we(i){return{c:E,l:E,m:E,p:E,d:E}}function $e(i){let e,s,t;return{c(){e=g("img"),this.h()},l(a){e=v(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){H(e.src,s=i[8])||u(e,"src",s),u(e,"alt",t=i[5].title),u(e,"class","aspect-[16/9] w-full object-cover sm:aspect-[2/1] lg:aspect-[3/2]")},m(a,n){L(a,e,n)},p(a,n){n&1&&!H(e.src,s=a[8])&&u(e,"src",s),n&1&&t!==(t=a[5].title)&&u(e,"alt",t)},d(a){a&&p(e)}}}function Ie(i){let e,s;return{c(){e=g("img"),this.h()},l(t){e=v(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){H(e.src,s="https://via.placeholder.com/800x400.png?text=Loading...")||u(e,"src",s),u(e,"alt","Loading..."),u(e,"class","aspect-[16/9] w-full object-cover sm:aspect-[2/1] lg:aspect-[3/2]")},m(t,a){L(t,e,a)},p:E,d(t){t&&p(e)}}}function W(i,e){let s,t,a,n,d,c,o,l="",r,f,k,M=e[5].title+"",S,P,A,y,w,x,m={ctx:e,current:null,token:null,hasCatch:!1,pending:Ie,then:$e,catch:we,value:8};return R(n=e[1](e[5]),m),w=new _e({props:{source:e[5].blogSummary||e[5].body}}),{key:i,first:null,c(){s=g("div"),t=g("div"),a=g("figure"),m.block.c(),d=j(),c=g("div"),o=g("div"),o.innerHTML=l,r=j(),f=g("div"),k=g("a"),S=re(M),A=j(),y=g("div"),Z(w.$$.fragment),this.h()},l(_){s=v(_,"DIV",{class:!0});var b=I(s);t=v(b,"DIV",{});var $=I(t);a=v($,"FIGURE",{});var N=I(a);m.block.l(N),N.forEach(p),d=C($),c=v($,"DIV",{class:!0});var D=I(c);o=v(D,"DIV",{class:!0,"data-svelte-h":!0}),Y(o)!=="svelte-189i4nw"&&(o.innerHTML=l),r=C(D),f=v(D,"DIV",{class:!0});var V=I(f);k=v(V,"A",{href:!0,class:!0});var U=I(k);S=oe(U,M),U.forEach(p),A=C(V),y=v(V,"DIV",{class:!0});var q=I(y);ee(w.$$.fragment,q),q.forEach(p),V.forEach(p),D.forEach(p),$.forEach(p),b.forEach(p),this.h()},h(){u(o,"class","prose items-center gap-x-4"),u(k,"href",P=`/posts/${e[5].slug}`),u(k,"class","prose-lg text-primary line-clamp-2 font-bold"),u(y,"class","prose-sm text-base-content mt-3 line-clamp-6 text-justify"),u(f,"class","group relative mt-3"),u(c,"class","m-4 max-w-xl"),u(s,"class","card bg-base-300 flex w-full flex-col justify-between p-4 shadow-xl"),this.first=s},m(_,b){L(_,s,b),h(s,t),h(t,a),m.block.m(a,m.anchor=null),m.mount=()=>a,m.anchor=null,h(t,d),h(t,c),h(c,o),h(c,r),h(c,f),h(f,k),h(k,S),h(f,A),h(f,y),te(w,y,null),x=!0},p(_,b){e=_,m.ctx=e,b&1&&n!==(n=e[1](e[5]))&&R(n,m)||ie(m,e,b),(!x||b&1)&&M!==(M=e[5].title+"")&&ne(S,M),(!x||b&1&&P!==(P=`/posts/${e[5].slug}`))&&u(k,"href",P);const $={};b&1&&($.source=e[5].blogSummary||e[5].body),w.$set($)},i(_){x||(T(w.$$.fragment,_),x=!0)},o(_){F(w.$$.fragment,_),x=!1},d(_){_&&p(s),m.block.d(),m.token=null,m=null,ae(w)}}}function X(i){let e,s='<div><div class="m-4 max-w-xl"><div class="prose items-center gap-x-4"><div class="text-accent">No posts found</div></div></div></div>';return{c(){e=g("div"),e.innerHTML=s,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1i59cfa"&&(e.innerHTML=s),this.h()},h(){u(e,"class","card bg-base-300 flex w-full flex-col justify-between p-4 shadow-xl")},m(t,a){L(t,e,a)},d(t){t&&p(e)}}}function ye(i){let e=[],s=new Map,t,a,n,d=z(i[0]);const c=l=>l[5].id;for(let l=0;l<d.length;l+=1){let r=Q(i,d,l),f=c(r);s.set(f,e[l]=W(f,r))}let o=i[0].length===0&&X();return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=j(),o&&o.c(),a=O()},l(l){for(let r=0;r<e.length;r+=1)e[r].l(l);t=C(l),o&&o.l(l),a=O()},m(l,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(l,r);L(l,t,r),o&&o.m(l,r),L(l,a,r),n=!0},p(l,r){r&3&&(d=z(l[0]),pe(),e=ce(e,r,c,1,l,d,s,t.parentNode,ue,W,t,Q),de()),l[0].length===0?o||(o=X(),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i(l){if(!n){for(let r=0;r<d.length;r+=1)T(e[r]);n=!0}},o(l){for(let r=0;r<e.length;r+=1)F(e[r]);n=!1},d(l){l&&(p(t),p(a));for(let r=0;r<e.length;r+=1)e[r].d(l);o&&o.d(l)}}}function xe(i){let e,s;return e=new ve({props:{$$slots:{default:[ye]},$$scope:{ctx:i}}}),{c(){Z(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,a){te(e,t,a),s=!0},p(t,[a]){const n={};a&513&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){ae(e,t)}}}function Ee(i,e,s){let t,a;B(i,ke,c=>s(2,t=c)),B(i,G,c=>s(3,a=c));async function n(c){if(c.featuredImage){const o=await K.collection("images").getOne(c.featuredImage);if(o&&o.file)return K.getFileUrl(o,o.file)}return"https://via.placeholder.com/800x400.png?text=AI+Blog"}J(G,a.title="AI powered note taking",a),J(G,a.description="AI powered note taking",a);let d=[];return le(async()=>{await ge(),s(0,d=t)}),[d,n]}class Te extends fe{constructor(e){super(),me(this,e,Ee,xe,se,{})}}export{Te as component};

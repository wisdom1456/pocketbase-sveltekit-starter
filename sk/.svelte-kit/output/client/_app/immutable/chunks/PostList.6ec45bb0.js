import{s as he,f as g,l as L,a as j,g as b,h as E,m as G,d,c as A,j as f,i as S,v as u,E as U,o as Ge,n as _e,u as je,e as q,L as ue}from"./scheduler.c76fa77e.js";import{S as pe,i as me,b as ee,d as te,m as se,a as y,g as W,t as V,c as z,e as le}from"./index.315486b9.js";import{e as x,u as Ae,o as Le,c as de}from"./index.fbc63c43.js";import{S as Re}from"./SvelteMarkdown.bf6db5b9.js";import{T as Te}from"./TagGroup.5c7274d9.js";function Ne(a){let e,t,l,r,s,o;return{c(){e=g("div"),t=g("h3"),l=L(a[0]),r=j(),s=g("p"),o=L(a[1]),this.h()},l(i){e=b(i,"DIV",{class:!0});var n=E(e);t=b(n,"H3",{class:!0});var m=E(t);l=G(m,a[0]),m.forEach(d),r=A(n),s=b(n,"P",{});var w=E(s);o=G(w,a[1]),w.forEach(d),n.forEach(d),this.h()},h(){f(t,"class","font-semibold text-lg mb-2"),f(e,"class","subpost-card border rounded shadow p-4 mb-4")},m(i,n){S(i,e,n),u(e,t),u(t,l),u(e,r),u(e,s),u(s,o)},p:U,i:U,o:U,d(i){i&&d(e)}}}function qe(a,e,t){let{subPost:l}=e,r=l.title,s=l.content;return a.$$set=o=>{"subPost"in o&&t(2,l=o.subPost)},[r,s,l]}class Fe extends pe{constructor(e){super(),me(this,e,qe,Ne,he,{subPost:2})}}function Ee(a,e,t){const l=a.slice();return l[4]=e[t],l}function He(a){const e=a.slice(),t=e[0].expand.featuredImage;e[7]=t;const l=e[7]&&e[7].file?de.getFileUrl(e[7],e[7].file):"";return e[8]=l,e}function Ue(a){let e,t;return{c(){e=g("img"),this.h()},l(l){e=b(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ue(e.src,t="https://via.placeholder.com/800x400.png?text=AI+Blog")||f(e,"src",t),f(e,"alt","Placeholder"),f(e,"class","aspect-[16/9] w-full rounded-t-lg object-cover sm:aspect-[2/1] lg:aspect-[3/2]")},m(l,r){S(l,e,r)},p:U,d(l){l&&d(e)}}}function we(a){let e,t,l;return{c(){e=g("img"),this.h()},l(r){e=b(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ue(e.src,t=a[8])||f(e,"src",t),f(e,"alt",l=a[0].title),f(e,"class","aspect-[16/9] w-full rounded-t-lg object-cover sm:aspect-[2/1] lg:aspect-[3/2]")},m(r,s){S(r,e,s)},p(r,s){s&1&&!ue(e.src,t=r[8])&&f(e,"src",t),s&1&&l!==(l=r[0].title)&&f(e,"alt",l)},d(r){r&&d(e)}}}function Ie(a){let e,t=new Date(a[0].updated).toLocaleDateString()+"",l,r;return{c(){e=g("time"),l=L(t),this.h()},l(s){e=b(s,"TIME",{datetime:!0,class:!0});var o=E(e);l=G(o,t),o.forEach(d),this.h()},h(){f(e,"datetime",r=a[0].updated),f(e,"class","text-accent")},m(s,o){S(s,e,o),u(e,l)},p(s,o){o&1&&t!==(t=new Date(s[0].updated).toLocaleDateString()+"")&&_e(l,t),o&1&&r!==(r=s[0].updated)&&f(e,"datetime",r)},d(s){s&&d(e)}}}function Pe(a){let e,t=a[0].title+"",l,r;return{c(){e=g("a"),l=L(t),this.h()},l(s){e=b(s,"A",{href:!0,class:!0});var o=E(e);l=G(o,t),o.forEach(d),this.h()},h(){f(e,"href",r=`/posts/${a[0].slug}`),f(e,"class","prose-lg text-primary hover:text-secondary font-bold")},m(s,o){S(s,e,o),u(e,l)},p(s,o){o&1&&t!==(t=s[0].title+"")&&_e(l,t),o&1&&r!==(r=`/posts/${s[0].slug}`)&&f(e,"href",r)},d(s){s&&d(e)}}}function De(a){let e,t,l;return t=new Re({props:{source:a[0].blogSummary}}),{c(){e=g("div"),ee(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var s=E(e);te(t.$$.fragment,s),s.forEach(d),this.h()},h(){f(e,"class","prose-sm text-base-content mt-3 line-clamp-6 text-justify")},m(r,s){S(r,e,s),se(t,e,null),l=!0},p(r,s){const o={};s&1&&(o.source=r[0].blogSummary),t.$set(o)},i(r){l||(y(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),le(t)}}}function ye(a){let e,t,l,r;return{c(){e=g("div"),t=g("p"),l=L("Error loading subposts: "),r=L(a[2]),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=E(e);t=b(o,"P",{});var i=E(t);l=G(i,"Error loading subposts: "),r=G(i,a[2]),i.forEach(d),o.forEach(d),this.h()},h(){f(e,"class","error-message text-red-500 p-4")},m(s,o){S(s,e,o),u(e,t),u(t,l),u(t,r)},p(s,o){o&4&&_e(r,s[2])},d(s){s&&d(e)}}}function Se(a){let e,t,l="Related Subposts:",r,s,o=[],i=new Map,n,m=x(a[1]);const w=h=>h[4].id;for(let h=0;h<m.length;h+=1){let _=Ee(a,m,h),v=w(_);i.set(v,o[h]=Ce(v,_))}return{c(){e=g("div"),t=g("h4"),t.textContent=l,r=j(),s=g("div");for(let h=0;h<o.length;h+=1)o[h].c();this.h()},l(h){e=b(h,"DIV",{class:!0});var _=E(e);t=b(_,"H4",{class:!0,"data-svelte-h":!0}),je(t)!=="svelte-7a1b44"&&(t.textContent=l),r=A(_),s=b(_,"DIV",{class:!0});var v=E(s);for(let C=0;C<o.length;C+=1)o[C].l(v);v.forEach(d),_.forEach(d),this.h()},h(){f(t,"class","subposts-title font-bold"),f(s,"class","grid grid-cols-1 gap-4"),f(e,"class","subposts-container mt-4 p-4")},m(h,_){S(h,e,_),u(e,t),u(e,r),u(e,s);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(s,null);n=!0},p(h,_){_&2&&(m=x(h[1]),W(),o=Ae(o,_,w,1,h,m,i,s,Le,Ce,null,Ee),z())},i(h){if(!n){for(let _=0;_<m.length;_+=1)y(o[_]);n=!0}},o(h){for(let _=0;_<o.length;_+=1)V(o[_]);n=!1},d(h){h&&d(e);for(let _=0;_<o.length;_+=1)o[_].d()}}}function Ce(a,e){let t,l,r;return l=new Fe({props:{subPost:e[4]}}),{key:a,first:null,c(){t=q(),ee(l.$$.fragment),this.h()},l(s){t=q(),te(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){S(s,t,o),se(l,s,o),r=!0},p(s,o){e=s;const i={};o&2&&(i.subPost=e[4]),l.$set(i)},i(s){r||(y(l.$$.fragment,s),r=!0)},o(s){V(l.$$.fragment,s),r=!1},d(s){s&&d(t),le(l,s)}}}function Be(a){let e,t,l,r,s,o,i,n,m,w,h,_,v,C,re,J,oe,R,ae,K,ie,T,ne,O,ce,Q,F;function ge(c,p){var N;return(N=c[0].expand)!=null&&N.featuredImage?we:Ue}function fe(c,p){return p===we?He(c):c}let H=ge(a),M=H(fe(a,H)),I=a[0]&&a[0].updated&&Ie(a),P=a[0]&&a[0].title&&Pe(a),k=a[0]&&a[0].blogSummary&&De(a);h=new Te({props:{post:a[0]}});let D=a[2]&&ye(a),$=a[1].length>0&&Se(a);return{c(){e=g("div"),t=g("figure"),M.c(),l=j(),r=g("div"),s=g("div"),I&&I.c(),o=j(),i=g("div"),P&&P.c(),n=j(),k&&k.c(),m=j(),w=g("div"),ee(h.$$.fragment),_=j(),v=g("div"),C=g("a"),re=L("Edit"),oe=j(),R=g("a"),ae=L("Inspire"),ie=j(),T=g("a"),ne=L("Delete"),ce=j(),D&&D.c(),Q=j(),$&&$.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var p=E(e);t=b(p,"FIGURE",{class:!0});var N=E(t);M.l(N),N.forEach(d),l=A(p),r=b(p,"DIV",{class:!0});var X=E(r);s=b(X,"DIV",{class:!0});var be=E(s);I&&I.l(be),be.forEach(d),o=A(X),i=b(X,"DIV",{class:!0});var Y=E(i);P&&P.l(Y),n=A(Y),k&&k.l(Y),Y.forEach(d),X.forEach(d),m=A(p),w=b(p,"DIV",{class:!0});var Z=E(w);te(h.$$.fragment,Z),_=A(Z),v=b(Z,"DIV",{class:!0});var B=E(v);C=b(B,"A",{class:!0,href:!0});var ve=E(C);re=G(ve,"Edit"),ve.forEach(d),oe=A(B),R=b(B,"A",{class:!0,href:!0});var ke=E(R);ae=G(ke,"Inspire"),ke.forEach(d),ie=A(B),T=b(B,"A",{class:!0,href:!0});var $e=E(T);ne=G($e,"Delete"),$e.forEach(d),B.forEach(d),Z.forEach(d),ce=A(p),D&&D.l(p),Q=A(p),$&&$.l(p),p.forEach(d),this.h()},h(){f(t,"class","w-full"),f(s,"class","prose items-center"),f(i,"class","group relative px-2"),f(r,"class","p-4"),f(C,"class","btn btn-outline"),f(C,"href",J=`/posts/${a[0].slug}/edit`),f(R,"class","btn btn-outline"),f(R,"href",K=`/posts/${a[0].slug}/inspire`),f(T,"class","btn btn-outline btn-secondary"),f(T,"href",O=`/posts/${a[0].slug}#delete`),f(v,"class","card-actions mt-4 justify-between"),f(w,"class","p-4"),f(e,"class","card border border-secondary bg-base-100 m-4 flex flex-col justify-between shadow-xl")},m(c,p){S(c,e,p),u(e,t),M.m(t,null),u(e,l),u(e,r),u(r,s),I&&I.m(s,null),u(r,o),u(r,i),P&&P.m(i,null),u(i,n),k&&k.m(i,null),u(e,m),u(e,w),se(h,w,null),u(w,_),u(w,v),u(v,C),u(C,re),u(v,oe),u(v,R),u(R,ae),u(v,ie),u(v,T),u(T,ne),u(e,ce),D&&D.m(e,null),u(e,Q),$&&$.m(e,null),F=!0},p(c,[p]){H===(H=ge(c))&&M?M.p(fe(c,H),p):(M.d(1),M=H(fe(c,H)),M&&(M.c(),M.m(t,null))),c[0]&&c[0].updated?I?I.p(c,p):(I=Ie(c),I.c(),I.m(s,null)):I&&(I.d(1),I=null),c[0]&&c[0].title?P?P.p(c,p):(P=Pe(c),P.c(),P.m(i,n)):P&&(P.d(1),P=null),c[0]&&c[0].blogSummary?k?(k.p(c,p),p&1&&y(k,1)):(k=De(c),k.c(),y(k,1),k.m(i,null)):k&&(W(),V(k,1,1,()=>{k=null}),z());const N={};p&1&&(N.post=c[0]),h.$set(N),(!F||p&1&&J!==(J=`/posts/${c[0].slug}/edit`))&&f(C,"href",J),(!F||p&1&&K!==(K=`/posts/${c[0].slug}/inspire`))&&f(R,"href",K),(!F||p&1&&O!==(O=`/posts/${c[0].slug}#delete`))&&f(T,"href",O),c[2]?D?D.p(c,p):(D=ye(c),D.c(),D.m(e,Q)):D&&(D.d(1),D=null),c[1].length>0?$?($.p(c,p),p&2&&y($,1)):($=Se(c),$.c(),y($,1),$.m(e,null)):$&&(W(),V($,1,1,()=>{$=null}),z())},i(c){F||(y(k),y(h.$$.fragment,c),y($),F=!0)},o(c){V(k),V(h.$$.fragment,c),V($),F=!1},d(c){c&&d(e),M.d(),I&&I.d(),P&&P.d(),k&&k.d(),le(h),D&&D.d(),$&&$.d()}}}function We(a,e,t){let{post:l}=e,r=[],s="";async function o(){try{await de.admins.authWithPassword("admin@example.com","admin_password");const i=await de.collection("subpost").getList(1,50,{filter:`post="${l.id}"`,expand:"post",autoCancel:!1});t(1,r=i.items)}catch(i){console.error("Error fetching subposts:",i),i instanceof Error?t(2,s=i.message):typeof i=="string"?t(2,s=i):t(2,s="An unknown error occurred")}}return Ge(()=>{l&&l.id&&o()}),a.$$set=i=>{"post"in i&&t(0,l=i.post)},[l,r,s]}class ze extends pe{constructor(e){super(),me(this,e,We,Be,he,{post:0})}}function Ve(a,e,t){const l=a.slice();return l[1]=e[t],l}function Je(a){let e,t="No posts available.";return{c(){e=g("p"),e.textContent=t},l(l){e=b(l,"P",{"data-svelte-h":!0}),je(e)!=="svelte-1mopmij"&&(e.textContent=t)},m(l,r){S(l,e,r)},p:U,i:U,o:U,d(l){l&&d(e)}}}function Ke(a){let e=[],t=new Map,l,r,s=x(a[0]);const o=i=>i[1].id;for(let i=0;i<s.length;i+=1){let n=Ve(a,s,i),m=o(n);t.set(m,e[i]=Me(m,n))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=q()},l(i){for(let n=0;n<e.length;n+=1)e[n].l(i);l=q()},m(i,n){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(i,n);S(i,l,n),r=!0},p(i,n){n&1&&(s=x(i[0]),W(),e=Ae(e,n,o,1,i,s,t,l.parentNode,Le,Me,l,Ve),z())},i(i){if(!r){for(let n=0;n<s.length;n+=1)y(e[n]);r=!0}},o(i){for(let n=0;n<e.length;n+=1)V(e[n]);r=!1},d(i){i&&d(l);for(let n=0;n<e.length;n+=1)e[n].d(i)}}}function Me(a,e){let t,l,r;return l=new ze({props:{post:e[1]}}),{key:a,first:null,c(){t=q(),ee(l.$$.fragment),this.h()},l(s){t=q(),te(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){S(s,t,o),se(l,s,o),r=!0},p(s,o){e=s;const i={};o&1&&(i.post=e[1]),l.$set(i)},i(s){r||(y(l.$$.fragment,s),r=!0)},o(s){V(l.$$.fragment,s),r=!1},d(s){s&&d(t),le(l,s)}}}function Oe(a){let e,t,l,r;const s=[Ke,Je],o=[];function i(n,m){return n[0]&&n[0].length>0?0:1}return e=i(a),t=o[e]=s[e](a),{c(){t.c(),l=q()},l(n){t.l(n),l=q()},m(n,m){o[e].m(n,m),S(n,l,m),r=!0},p(n,[m]){let w=e;e=i(n),e===w?o[e].p(n,m):(W(),V(o[w],1,1,()=>{o[w]=null}),z(),t=o[e],t?t.p(n,m):(t=o[e]=s[e](n),t.c()),y(t,1),t.m(l.parentNode,l))},i(n){r||(y(t),r=!0)},o(n){V(t),r=!1},d(n){n&&d(l),o[e].d(n)}}}function Qe(a,e,t){let{posts:l}=e;return console.log("Received posts in PostList:",l),a.$$set=r=>{"posts"in r&&t(0,l=r.posts)},[l]}class tt extends pe{constructor(e){super(),me(this,e,Qe,Oe,he,{posts:0})}}export{tt as P};
